# IoT Frontend Project - Cursor Rules

## 项目概述
这是一个基于Vue 3的IoT设备管理系统前端项目，用于管理IoT设备、用户认证、固件升级等功能。

## 技术栈
- **框架**: Vue 3 (Composition API)
- **路由**: Vue Router
- **状态管理**: Vuex/Pinia (待确认)
- **HTTP客户端**: 自定义API封装
- **构建工具**: 待配置 (建议使用Vite)
- **部署**: Nginx

## 项目结构
```
src/
├── api/                    # API接口封装
│   ├── index.js           # API主入口
│   └── modules/           # 按模块分组的API
│       ├── auth.js        # 认证相关API
│       ├── devices.js     # 设备管理API
│       └── users.js       # 用户管理API
├── components/            # 可复用组件
│   ├── common/           # 通用组件
│   └── ui/               # UI组件
├── views/                # 页面组件
│   ├── Auth/            # 认证页面
│   │   ├── Login.vue
│   │   └── Register.vue
│   ├── Dashboard.vue    # 仪表板
│   ├── DevicesManagement.vue  # 设备管理
│   ├── FirmwareUpgrade.vue    # 固件升级
│   ├── UserManagement.vue     # 用户管理
│   └── NotFound.vue     # 404页面
├── router/               # 路由配置
├── store/               # 状态管理
├── utils/               # 工具函数
├── styles/              # 样式文件
└── assets/              # 静态资源
```

## 编码规范

### Vue组件规范
1. **使用Composition API**: 优先使用Vue 3的Composition API和`<script setup>`语法
2. **组件命名**: 使用PascalCase，文件名与组件名保持一致
3. **Props定义**: 使用TypeScript或详细的prop验证
4. **事件命名**: 使用kebab-case，如`@device-selected`
5. **插槽命名**: 使用kebab-case，如`#device-header`

### 代码风格
1. **缩进**: 使用2个空格
2. **引号**: 优先使用单引号
3. **分号**: 不使用分号结尾
4. **行长度**: 不超过100字符
5. **空行**: 在逻辑块之间添加空行

### API调用规范
1. **统一错误处理**: 在API层统一处理错误
2. **Loading状态**: 为异步操作添加loading状态
3. **错误提示**: 使用用户友好的错误提示
4. **请求拦截**: 统一处理认证token和请求头

### 样式规范
1. **CSS类命名**: 使用BEM命名规范
2. **作用域样式**: 组件样式使用scoped
3. **响应式设计**: 支持移动端适配
4. **主题变量**: 使用CSS变量定义主题色彩

## 功能模块

### 认证模块
- 用户登录/注册
- JWT token管理
- 路由守卫
- 权限控制

### 设备管理
- 设备列表展示
- 设备添加/删除
- 设备控制命令
- 设备状态监控

### 固件升级
- 固件版本管理
- 升级任务创建
- 升级进度监控
- 升级历史记录

### 用户管理
- 用户列表
- 用户权限管理
- 用户信息编辑

## 开发指南

### 新增页面
1. 在`src/views/`下创建Vue组件
2. 在`src/router/index.js`中添加路由配置
3. 如需API调用，在`src/api/modules/`下添加对应API
4. 如需状态管理，在`src/store/modules/`下添加store模块

### 新增组件
1. 在`src/components/`下创建组件
2. 使用Composition API编写逻辑
3. 添加适当的props验证
4. 编写组件文档和使用示例

### API开发
1. 在`src/api/modules/`下创建对应的API模块
2. 使用统一的请求/响应拦截器
3. 添加适当的错误处理
4. 导出清晰的API函数

## 代码质量

### 必须修复的问题
1. **Login.vue中的拼写错误**:
   - `from` 应为 `form`
   - `sumbit` 应为 `submit`
   - `Loging` 应为 `Login`
   - `err` 应为 `error`

2. **DevicesManagement.vue中的问题**:
   - 函数名不一致: `addDevices` vs `addDevice`
   - 函数名不一致: `deleteDevices` vs `deleteDevice`
   - 函数名不一致: `controlDevices` vs `controlDevice`
   - 缺少参数: `deleteDevice(id)` 中的 `id` 参数
   - 缺少参数: `controlDevice(deviceId, ...)` 中的 `deviceId` 参数
   - HTML注释语法错误: `<!-- Add Dvice Modal -->>` 应为 `<!-- Add Device Modal -->`

### 建议改进
1. 添加TypeScript支持
2. 配置ESLint和Prettier
3. 添加单元测试
4. 配置Vite构建工具
5. 添加国际化支持
6. 优化移动端体验

## 部署配置
- 使用Nginx作为Web服务器
- 配置HTTPS和SSL证书
- 设置API代理转发
- 配置静态资源缓存

## 注意事项
1. 确保所有API调用都有错误处理
2. 为敏感操作添加确认对话框
3. 实现适当的加载状态和用户反馈
4. 遵循Vue 3最佳实践
5. 保持代码的可读性和可维护性
